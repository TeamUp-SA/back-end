<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="556px" preserveAspectRatio="none" style="width:1031px;height:556px;background:#FFFFFF;" version="1.1" viewBox="0 0 1031 556" width="1031px" zoomAndPan="magnify"><title>User Login &amp; Session Establishment</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="258.8291" x="385.575" y="28.5352">User Login &amp; Session Establishment</text><g><title>WebUser</title><rect fill="#000000" fill-opacity="0.00000" height="356.7266" width="8" x="33.4766" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="37" x2="37" y1="118.9766" y2="475.7031"/></g><g><title>Frontend</title><rect fill="#000000" fill-opacity="0.00000" height="356.7266" width="8" x="295.7422" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="299.2129" x2="299.2129" y1="118.9766" y2="475.7031"/></g><g><title>Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="356.7266" width="8" x="483.5942" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="487.2354" x2="487.2354" y1="118.9766" y2="475.7031"/></g><g><title>AuthSvc</title><rect fill="#000000" fill-opacity="0.00000" height="356.7266" width="8" x="735.4116" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="739.2969" x2="739.2969" y1="118.9766" y2="475.7031"/></g><g><title>Postgres</title><rect fill="#000000" fill-opacity="0.00000" height="356.7266" width="8" x="929.2788" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="933.2261" x2="933.2261" y1="118.9766" y2="475.7031"/></g><g><title>Redis</title><rect fill="#000000" fill-opacity="0.00000" height="356.7266" width="8" x="996.6553" y="118.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1000.3315" x2="1000.3315" y1="118.9766" y2="475.7031"/></g><g class="participant participant-head" data-participant="WebUser"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.9531" x="5" y="116.0234">WebUser</text><ellipse cx="37.4766" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M37.4766,58.9883 L37.4766,85.9883 M24.4766,66.9883 L50.4766,66.9883 M37.4766,85.9883 L24.4766,100.9883 M37.4766,85.9883 L50.4766,100.9883" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="WebUser"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.9531" x="5" y="488.2383">WebUser</text><ellipse cx="37.4766" cy="499.6914" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M37.4766,507.6914 L37.4766,534.6914 M24.4766,515.6914 L50.4766,515.6914 M37.4766,534.6914 L24.4766,549.6914 M37.4766,534.6914 L50.4766,549.6914" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Frontend"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.0586" x="262.2129" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.0586" x="269.2129" y="108.0234">Frontend</text></g><g class="participant participant-tail" data-participant="Frontend"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75.0586" x="262.2129" y="474.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.0586" x="269.2129" y="495.2383">Frontend</text></g><g class="participant participant-head" data-participant="Gateway"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.7178" x="452.2354" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.7178" x="459.2354" y="108.0234">Gateway</text></g><g class="participant participant-tail" data-participant="Gateway"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70.7178" x="452.2354" y="474.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.7178" x="459.2354" y="495.2383">Gateway</text></g><g class="participant participant-head" data-participant="AuthSvc"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68.2295" x="705.2969" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.2295" x="712.2969" y="108.0234">AuthSvc</text></g><g class="participant participant-tail" data-participant="AuthSvc"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68.2295" x="705.2969" y="474.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.2295" x="712.2969" y="495.2383">AuthSvc</text></g><g class="participant participant-head" data-participant="Postgres"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.1055" x="901.2261" y="116.0234">Postgres</text><path d="M915.2788,66.4883 C915.2788,56.4883 933.2788,56.4883 933.2788,56.4883 C933.2788,56.4883 951.2788,56.4883 951.2788,66.4883 L951.2788,92.4883 C951.2788,102.4883 933.2788,102.4883 933.2788,102.4883 C933.2788,102.4883 915.2788,102.4883 915.2788,92.4883 L915.2788,66.4883" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M915.2788,66.4883 C915.2788,76.4883 933.2788,76.4883 933.2788,76.4883 C933.2788,76.4883 951.2788,76.4883 951.2788,66.4883" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Postgres"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58.1055" x="901.2261" y="488.2383">Postgres</text><path d="M915.2788,501.1914 C915.2788,491.1914 933.2788,491.1914 933.2788,491.1914 C933.2788,491.1914 951.2788,491.1914 951.2788,501.1914 L951.2788,527.1914 C951.2788,537.1914 933.2788,537.1914 933.2788,537.1914 C933.2788,537.1914 915.2788,537.1914 915.2788,527.1914 L915.2788,501.1914" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M915.2788,501.1914 C915.2788,511.1914 933.2788,511.1914 933.2788,511.1914 C933.2788,511.1914 951.2788,511.1914 951.2788,501.1914" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="Redis"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50.6475" x="975.3315" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.6475" x="982.3315" y="108.0234">Redis</text></g><g class="participant participant-tail" data-participant="Redis"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50.6475" x="975.3315" y="474.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.6475" x="982.3315" y="495.2383">Redis</text></g><g class="message" data-participant-1="WebUser" data-participant-2="Frontend"><polygon fill="#181818" points="287.7422,146.2871,297.7422,150.2871,287.7422,154.2871,291.7422,150.2871" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="37.4766" x2="293.7422" y1="150.2871" y2="150.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.019" x="44.4766" y="145.5449">Submit credentials</text></g><g class="message" data-participant-1="Frontend" data-participant-2="Gateway"><polygon fill="#181818" points="475.5942,175.5977,485.5942,179.5977,475.5942,183.5977,479.5942,179.5977" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="299.7422" x2="481.5942" y1="179.5977" y2="179.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.1064" x="306.7422" y="174.8555">POST /auth/login</text></g><g class="message" data-participant-1="Gateway" data-participant-2="AuthSvc"><polygon fill="#181818" points="727.4116,204.9082,737.4116,208.9082,727.4116,212.9082,731.4116,208.9082" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="487.5942" x2="733.4116" y1="208.9082" y2="208.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.6289" x="494.5942" y="204.166">Forward request</text></g><g class="message" data-participant-1="AuthSvc" data-participant-2="Postgres"><polygon fill="#181818" points="921.2788,234.2188,931.2788,238.2188,921.2788,242.2188,925.2788,238.2188" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="739.4116" x2="927.2788" y1="238.2188" y2="238.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.3955" x="746.4116" y="233.4766">Lookup user by email</text></g><g class="message" data-participant-1="Postgres" data-participant-2="AuthSvc"><polygon fill="#181818" points="750.4116,263.5293,740.4116,267.5293,750.4116,271.5293,746.4116,267.5293" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="744.4116" x2="932.2788" y1="267.5293" y2="267.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.3652" x="756.4116" y="262.7871">User row + password hash</text></g><g class="message" data-participant-1="AuthSvc" data-participant-2="AuthSvc"><line style="stroke:#181818;stroke-width:1;" x1="739.4116" x2="781.4116" y1="312.1504" y2="312.1504"/><line style="stroke:#181818;stroke-width:1;" x1="781.4116" x2="781.4116" y1="312.1504" y2="325.1504"/><line style="stroke:#181818;stroke-width:1;" x1="740.4116" x2="781.4116" y1="325.1504" y2="325.1504"/><polygon fill="#181818" points="750.4116,321.1504,740.4116,325.1504,750.4116,329.1504,746.4116,325.1504" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.272" x="746.4116" y="292.0977">Compare password</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.8672" x="746.4116" y="307.4082">Generate JWT (access_token)</text></g><g class="message" data-participant-1="AuthSvc" data-participant-2="Redis"><polygon fill="#181818" points="988.6553,365.7715,998.6553,369.7715,988.6553,373.7715,992.6553,369.7715" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="739.4116" x2="994.6553" y1="369.7715" y2="369.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.4565" x="746.4116" y="349.7188">SET sessionKey(token)=email</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.4409" x="746.4116" y="365.0293">TTL = 24h</text></g><g class="message" data-participant-1="AuthSvc" data-participant-2="Gateway"><polygon fill="#181818" points="498.5942,395.082,488.5942,399.082,498.5942,403.082,494.5942,399.082" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="492.5942" x2="738.4116" y1="399.082" y2="399.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227.8174" x="504.5942" y="394.3398">200 OK + Set-Cookie(access_token)</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Frontend"><polygon fill="#181818" points="310.7422,424.3926,300.7422,428.3926,310.7422,432.3926,306.7422,428.3926" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="304.7422" x2="486.5942" y1="428.3926" y2="428.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.8521" x="316.7422" y="423.6504">Response with JWT cookie</text></g><g class="message" data-participant-1="Frontend" data-participant-2="WebUser"><polygon fill="#181818" points="48.4766,453.7031,38.4766,457.7031,48.4766,461.7031,44.4766,457.7031" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="42.4766" x2="298.7422" y1="457.7031" y2="457.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="238.2656" x="54.4766" y="452.9609">Redirect to dashboard (authenticated)</text></g><!--SRC=[NP51Qy9048Nl-olcL9GYYlGaM2YYGXKKa-AbK3QRmImck-dEfC5_tqdKrFIwy-syD- -nvHpXWp30rf-iWoU8aCXw1qjYdUIMiW8TAstO1pXYqh2gr86jiQLs3AlW7QDBUuzhpLZhI-_jhU8i-Z4grR9O4yBU4vy2KeywO6f9gPiIZ5ux0PX1L2M5PJ01Kp5bTKwgcmfvKnLmlujY66jH7EVDNUe-4khcGwYL3xKEAGJyhf1OtIS2tRq9jVN-N9LGDNQI2s2XRQww-QYtiVKSV0tFK6gYsilsJ5FskFgFNlX2JiSE_NHhT1Z4AhmVOnXeOwICB_PdTCF75Mr8JHxB6EZQrmOlWoiuRnr-kZZUmXocBm_YlOocamdiDk8qGXujv4YB_nIxqFej791AxwJ0sdBMEZNjxuSkvCEzmLdhDg1XO0-fX97u9lH1qqxJeX6LTFWB]--></g></svg>